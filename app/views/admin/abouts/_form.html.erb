
<div class="content-wrapper">
    <div class="row">
      <div class="col-12 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title">Giới thiệu</h4>
            <%= form_with(model: [:admin, @about], local: true, class: "form-group" ) do |form| %>
              <%= form.label :title, "Tiêu đề"%>
              <%= form.text_field :title, class: "form-control" %>

              <%= form.label :slug, "Liên kết" %>
              <%= form.text_field :slug, class: "form-control" %>

              <%= form.label :content, "Nội dung" %>
              <%= form.text_area :content, class: "form-control tinymce" %>
              <br>
             <%= form.submit form.object.new_record? ? "Thêm" : "Chỉnh sửa", class: "btn btn-action-form" %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  document.addEventListener('turbolinks:load', function() {
    tinymce.remove(); // Remove any existing instances of TinyMCE
    tinymce.init({
    selector: '.tinymce',
    height: 700,
    plugins: [
      'image', "lists"
    ],
    toolbar: 'undo redo | formatselect | ' +
    ' bold italic | alignleft aligncenter ' +
    ' alignright alignjustify | bullist numlist outdent indent | ' +
    ' removeformat | help | forecolor backcolor image',
    image_title: true,
    automatic_uploads: true,
    images_upload_url: '/text_images',
    file_picker_types: 'image',

    document_base_url: '/',

    file_picker_callback: function(cb, value, meta) {
      var input = document.createElement('input');
      input.setAttribute('type', 'file');
      input.setAttribute('accept', 'image/*');

      input.onchange = function() {
        var file = this.files[0];

        var id = 'blobid' + (new Date()).getTime();
        var blobCache = tinymce.activeEditor.editorUpload.blobCache;
        var blobInfo = blobCache.create(id, file);
        blobCache.add(blobInfo);

        cb(blobInfo.blobUri(), { title: file.name });
      };

      input.click();
    }
    });
  });
</script>
